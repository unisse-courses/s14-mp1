{{>jumbotron}}

<!-- START OF MODAL SECTION -->
<!-- EDIT POST -->
<div class="modal fade" id="modalEditPost" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog" role="document">
    	<div class="modal-content">
      		<div class="modal-header text-center">
        		<h4 class="modal-title w-100 font-weight-bold">Edit Post</h4>
        		<button type="button" class="close" data-dismiss="modal" id="editPostClose" aria-label="Close">
          			<span aria-hidden="true">&times;</span>
        		</button>
      		</div>
	   		<form>
		      	<div class="modal-body mx-3">
		      		<input id="modalReviewRef" name="modalReviewRef" hidden>
			        <div class="md-form mt-2 mb-4">
			        	<label>Review Content</label>
			       		<textarea class="form-control validate" name="modalReviewContent" id="modalReviewContent" rows="3" required></textarea>
			        </div>
			     	<div class="md-form mb-4">
			     		<label>Professor</label>
			           <input type="text" id="modalEditPostProfessor" class="form-control" readonly>
			        </div>
					<div class="md-form mb-4">
						<label>Course</label>
			           <input type="text" id="modalEditPostCourse" class="form-control" readonly>
			        </div>
			        <p id="msgEd1" class="text-danger mb-0 mt-2 text-center"></p>
		      	</div>
			    <div class="modal-footer d-flex justify-content-center">
			 	   <button type="button" id ="savePost" class="btn btn-primary btn-sm text-white">Save Post</button>
			    </div>
	    	</form>
		</div>
	</div>
</div>

<!-- EDIT COMMENT -->
<div class="modal fade" id="modalEditComment" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  	<div class="modal-dialog" role="document">
    	<div class="modal-content">
      		<div class="modal-header text-center">
        		<h4 class="modal-title w-100 font-weight-bold">Edit Comment</h4>
        		<button type="button" class="close" data-dismiss="modal" id="editCommentClose" aria-label="Close">
          			<span aria-hidden="true">&times;</span>
        		</button>
      		</div>
      		<form>
          		<div class="modal-body mx-3">
            		<label>Comment Content</label>
            		<input type="hidden" id="modalCommentRef" name="modalCommentRef">
            		<div class="md-form mb-4">
              			<textarea class="form-control validate" name="modalCommentContent" id="modalCommentContent" rows="3" required></textarea>
            		</div>
			        <div class="md-form mb-4">
			            <label> Professor</label>
			            <input type="text" id="modalEditCommentProfessor" class="form-control" readonly>
			        </div>
        			<div class="md-form mb-4">
              			<label>Course</label>
              			<input type="text" id="modalEditCommentCourse" class="form-control" readonly>
            		</div>
            		<p id="msgEd2" class="text-danger mb-0 mt-2 text-center"></p>
          		</div>
        		<div class="modal-footer d-flex justify-content-center">
         			<button type="button" id ="saveComment" class="btn btn-primary btn-sm text-white">Save Comment</button>
        		</div>
      		</form>
    	</div>
  	</div>
</div>

<!-- DELETE POST -->
<div class="modal fade" id="modalDeletePost" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog" role="document">
		<div class="modal-content">
      		<div class="modal-header text-center">
        		<h4 class="modal-title w-100 font-weight-bold">Delete Post</h4>
        		<button type="button" class="close" data-dismiss="modal" aria-label="Close">
        		  <span aria-hidden="true">&times;</span>
       			</button>
      		</div>
      		<div class="modal-body mx-3">
        		<div class="mx-3 text-center"> 
              		<p><span class="font-weight-bold">Warning:</span> Deleting a post means the post's comments will also be deleted, <span class="font-weight-bold">and this action cannot be undone.</span></p>
        		</div>
        		<h5 class = "text-center mb-3"><span class="font-weight-bold">Are you sure you want to delete this post?</span></h5>
        		<div>
		    		<p id="msgDel1" class="text-danger mb-2 text-center"></p>
		    	</div>
		    	<input type="hidden" id="modalDeleteReviewRef" name="modalDeleteReviewRef">
    			<div class="modal-footer d-flex justify-content-center">
        			<button class="btn btn-primary btn-sm text-white" id="deletePost">Delete Post</button>
      			</div>
    		</div>
  		</div>
  	</div>
</div>

<!-- DELETE COMMENT -->
<div class="modal fade" id="modalDeleteComment" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  	<div class="modal-dialog" role="document">
    	<div class="modal-content">
      		<div class="modal-header text-center">
	        	<h4 class="modal-title w-100 font-weight-bold">Delete Comment</h4>
	        	<button type="button" class="close" data-dismiss="modal" aria-label="Close">
	          		<span aria-hidden="true">&times;</span>
	        	</button>
      		</div>
	      	<div class="modal-body mx-3">
	        	<div class="mx-3 text-center"> 
	            	<p><span class="font-weight-bold">Warning:</span> Deleting a comment <span class="font-weight-bold">cannot be undone.</span></p>
	        	</div>
		       	<h5 class="text-center mb-3"><span class="font-weight-bold">Are you sure you want to delete this comment?</span></h5>
		       	<div>
		    		<p id="msgDel2" class="text-danger mb-2 text-center"></p>
		    	</div>
		    	<input type="hidden" id="modalDeleteCommentRef" name="modalDeleteCommentRef">
		   		<div class="modal-footer d-flex justify-content-center">
		       		<button class="btn btn-primary btn-sm text-white" id ="deleteComment">Delete Comment</button>
		  		</div>
    		</div>
  		</div>
  	</div>
</div>

<!-- END OF MODAL SECTION -->
<div class="row mt-sm-4 mt-md-0">
	<div class="col-sm-12 col-md-8">
		<ul class="mt-0 nav nav-mytabs" id="myTab" role="tablist">
			<li class="nav-item">
		    	<a class="nav-link active" id="reviews-tab" data-toggle="tab" href="#reviews" role="tab" aria-controls="reviews" aria-selected="true">Reviews</a>
		    </li>
		    <li class="nav-item">
		    	<a class="nav-link" id="comments-tab" data-toggle="tab" href="#comments" role="tab" aria-controls="comments" aria-selected="false">Comments</a>
		    </li>
		</ul>
		<div class="tab-content mytab-content" id="myTabContent">
    		<div class="tab-pane fade show active" id="reviews" role="tabpanel" aria-labelledby="reviews-tab">
    			<!-- REVIEWS PANE -->
    			<table class="table table-hover table-light mb-0">
		            <thead class="thead-green">
		               	<tr>
		                	<th scope="col"></th>
		                  	<th scope="col">Review</th>
		                  	<th scope="col">Course</th>
		                  	<th scope="col">Reviewer</th>
		                  	<th scope="col" class="text-center">Action</th>
		            	</tr>
		            </thead>
		            <tbody>
		            {{#each reviews}}
		            <tr>
		            	<form action="#" onsubmit="return false">
		                  	<th scope="row"></th>
		                  	<td>
		                    	<span class="d-inline-block text-truncate"  style="max-width: 200px;">{{this.reviewContent}}</span>
		                  	</td>
		                  	<td>{{this.profCourse}}</td>
		                  	<td>{{this.studentRef.studentName}}</td>
		                  	<td class="text-center">
		                     	<button class="btn btn-primary btn-sm text-white dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Action</button>
		                     	<div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
		                        	<button class="dropdown-item" class="text-center" data-toggle="modal" id= "modalEditPostSubmit" data-target="#modalEditPost" 
		                           	data-funct= "editPost"
		                           	data-id= "{{this._id}}"
		                           	data-content = "{{this.reviewContent}}"
		                           	data-course = "{{this.profCourse}}" 
		                           	data-profname = "{{this.profRef.profName}}"
		                           	> Edit Post </button>
			                        <button class="dropdown-item" class="text-center" data-toggle="modal" data-target="#modalDeletePost"
			                        data-funct= "deletePost"
			                        data-id= "{{this._id}}"
			                        >Delete Post</button>
			                        <a class="dropdown-item" class="text-center" href="/reviews/{{this._id}}">Go to Review </a>
		                    	</div>
		                  	</td>
		               </form>
		            </tr>
		            {{/each}}
		            </tbody>
		         </table>
			</div>
			<div class="tab-pane fade" id="comments" role="tabpanel" aria-labelledby="comments-tab">
		    <!-- COMMENT PANE -->
			    <table class="table table-hover table-light mb-0">
		            <thead class="thead-green">
		            	<tr>
		                  	<th scope="col"></th>
		                  	<th scope="col">Comment</th>
		                  	<th scope="col">Course</th>
		                  	<th scope="col">Professor</th>
		                  	<th scope="col" class="text-center">Action</th>
		               	</tr>
		            </thead>
		            <tbody>
		            {{#each comments}}
		            <tr>
		               	<form action="#" onsubmit="return false">
		                  	<th scope="row"></th>
		                  	<td>
		                    	<span class="d-inline-block text-truncate"  style="max-width: 200px;">{{this.commentContent}}</span>
		                  	</td>
		                  	<td>{{this.reviewRef.profCourse}}</td>
		                  	<td>{{this.profDetails.profName}}</td>
		                  	<td class="text-center">
		                    	<button class="btn btn-primary btn-sm text-white dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Action</button>
		                     	<div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
		                        	<button class="dropdown-item" class="text-center" data-toggle="modal" data-target="#modalEditComment" 
		                           	data-funct = "editComment"
		                           	data-id= "{{this._id}}"
		                           	data-content = "{{this.commentContent}}"
		                           	data-course = "{{this.reviewRef.profCourse}}" 
		                           	data-profname = "{{this.profDetails.profName}}"
		                           	> Edit Comment </button>
		                        	<button class="dropdown-item" class="text-center" data-toggle="modal" data-target="#modalDeleteComment"
		                            data-funct ="deleteComment"
		                            data-id= "{{this._id}}"
		                          	>Delete Comment</button>
		                        	<a class="dropdown-item" class="text-center" href="/reviews/{{this.reviewRef._id}}#{{this._id}}">Go to Comment</a>
		                     	</div>
		                  </td>
		               </form>
		            </tr>
		            {{/each}}
		            </tbody>
		        </table>
			</div>
		</div>
	</div>
    <div class="col-sm-12 col-md-4">
    	<div class="card mb-4">
    		<div class="card-header bg-gradient font-weight-bold">
    			ID Number: {{session.idNum}}
  			</div>
	      	<div class="card-body">
		      	<form>
		        	<div class="form-group row">
		            	<label for="changePassword" class="col-sm-4 col-form-label">Current Password</label>
		            	<input type="password" id="currentPassword" class="form-control col-sm-7 mt-2" placeholder="Current Password"> 
		        	</div>
		          	<div class="form-group row">
		          		<label for="changePassword" class="col-sm-4 col-form-label">New Password</label>
		          		<input type="password" id="newPassword" class="form-control col-sm-7 mt-2" placeholder="New Password"> 
		       	  	</div>
		          	<div class="form-group row">
		            	<label for="changePassword" class="col-sm-4 col-form-label">Confirm Password</label>
		            	<input type="password" id="confirmPassword" class="form-control col-sm-7 mt-2" placeholder="Confirm Password"> 
		          	</div>
		          	<div class="text-center">
		            	<button type="button" id="changePassword" class="btn btn-primary mt-0 mb-2">Change Password</button>
		          	</div>
		    	</form>
		    	<p id="msg" class="text-danger mb-0 mt-2 text-center"></p>
	    	</div>
		</div>
	</div>
</div>